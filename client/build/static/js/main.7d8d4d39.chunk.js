(this["webpackJsonpmern-client"]=this["webpackJsonpmern-client"]||[]).push([[0],{59:function(e,t,a){e.exports=a(74)},64:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(31),l=a.n(o),c=(a(64),a(16)),i=a(6),s=a(12),u=a(58),m=function(){return r.a.createElement("div",{className:"container"})},d=a(25),p=a(22),f=a(19),v=a.n(f),b=a(26),E=a(20),g=a(18),h=a(23),j=a(15),w=a.n(j);function N(){var e=Object(h.a)(["\n  mutation addBulkProject($project: [projectInput]) {\n    addBulkProject(project: $project) {\n      projects {\n        title\n        ideasText\n        date\n      }\n    }\n  }\n"]);return N=function(){return e},e}function y(){var e=Object(h.a)(["\n  mutation editProject($project: projectInput) {\n    editProject(project: $project) {\n      _id\n      projects {\n        title\n        ideasText\n        date\n      }\n    }\n  }\n"]);return y=function(){return e},e}function x(){var e=Object(h.a)(["\n  mutation deleteProject($_id: ID) {\n    deleteProject(_id: $_id) {\n      _id\n    }\n  }\n"]);return x=function(){return e},e}function O(){var e=Object(h.a)(["\n  mutation addProject($project: projectInput) {\n    addProject(project: $project) {\n      projects {\n        _id\n        title\n        ideasText\n        date\n      }\n    }\n  }\n"]);return O=function(){return e},e}function k(){var e=Object(h.a)(["\n  mutation addUser(\n    $firstName: String!\n    $lastName: String!\n    $email: String!\n    $password: String!\n  ) {\n    addUser(\n      firstName: $firstName\n      lastName: $lastName\n      email: $email\n      password: $password\n    ) {\n      token\n      user {\n        firstName\n        _id\n        lastName\n        email\n        projects {\n          title\n        }\n        projectCount\n      }\n    }\n  }\n"]);return k=function(){return e},e}function S(){var e=Object(h.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        _id\n        firstName\n        lastName\n        email\n        projects {\n          title\n        }\n        projectCount\n      }\n    }\n  }\n"]);return S=function(){return e},e}var P=w()(S()),T=w()(k()),$=w()(O()),C=w()(x()),_=(w()(y()),w()(N()),a(50)),D=a(51),A=a(41),F=a.n(A),I=new(function(){function e(){Object(_.a)(this,e)}return Object(D.a)(e,[{key:"getProfile",value:function(){return F()(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!!e&&!this.isTokenExpired(e)}},{key:"isTokenExpired",value:function(e){try{return F()(e).exp<Date.now()/1e3}catch(t){return!1}}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.assign("/")}}]),e}());var L=function(e){var t=Object(n.useState)({email:"",password:""}),a=Object(E.a)(t,2),o=a[0],l=a[1],i=Object(g.a)(P),s=Object(E.a)(i,2),u=s[0],m=s[1].error,f=function(){var e=Object(b.a)(v.a.mark((function e(t){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,u({variables:{email:o.email,password:o.password}});case 4:a=e.sent,n=a.data.login.token,I.login(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),h=function(e){var t=e.target,a=t.name,n=t.value;l(Object(p.a)(Object(p.a)({},o),{},Object(d.a)({},a,n)))};return r.a.createElement("div",{className:"container my-1"},r.a.createElement(c.b,{to:"/signup"},"\u2190 Go to Signup"),r.a.createElement("h2",null,"Login"),r.a.createElement("form",{onSubmit:f},r.a.createElement("div",{className:"flex-row space-between my-2"},r.a.createElement("label",{htmlFor:"email"},"Email address:"),r.a.createElement("input",{placeholder:"youremail@test.com",name:"email",type:"email",id:"email",onChange:h})),r.a.createElement("div",{className:"flex-row space-between my-2"},r.a.createElement("label",{htmlFor:"pwd"},"Password:"),r.a.createElement("input",{placeholder:"******",name:"password",type:"password",id:"pwd",onChange:h})),m?r.a.createElement("div",null,r.a.createElement("p",{className:"error-text"},"The provided credentials are incorrect")):null,r.a.createElement("div",{className:"flex-row flex-end"},r.a.createElement("button",{claseName:"btn",type:"submit"},"Submit"))))};var B=function(e){var t=Object(n.useState)({email:"",password:""}),a=Object(E.a)(t,2),o=a[0],l=a[1],i=Object(g.a)(T),s=Object(E.a)(i,1)[0],u=function(){var e=Object(b.a)(v.a.mark((function e(t){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,s({variables:{email:o.email,password:o.password,firstName:o.firstName,lastName:o.lastName}});case 3:a=e.sent,n=a.data.addUser.token,I.login(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(e){var t=e.target,a=t.name,n=t.value;l(Object(p.a)(Object(p.a)({},o),{},Object(d.a)({},a,n)))};return r.a.createElement("div",{className:"container my-1"},r.a.createElement(c.b,{to:"/login"},"\u2190 Go to Login"),r.a.createElement("h2",null,"Signup"),r.a.createElement("form",{onSubmit:u},r.a.createElement("div",{className:"flex-row space-between my-2"},r.a.createElement("label",{htmlFor:"firstName"},"First Name:"),r.a.createElement("input",{placeholder:"First",name:"firstName",type:"firstName",id:"firstName",onChange:m})),r.a.createElement("div",{className:"flex-row space-between my-2"},r.a.createElement("label",{htmlFor:"lastName"},"Last Name:"),r.a.createElement("input",{placeholder:"Last",name:"lastName",type:"lastName",id:"lastName",onChange:m})),r.a.createElement("div",{className:"flex-row space-between my-2"},r.a.createElement("label",{htmlFor:"email"},"Email:"),r.a.createElement("input",{placeholder:"youremail@test.com",name:"email",type:"email",id:"email",onChange:m})),r.a.createElement("div",{className:"flex-row space-between my-2"},r.a.createElement("label",{htmlFor:"pwd"},"Password:"),r.a.createElement("input",{placeholder:"******",name:"password",type:"password",id:"pwd",onChange:m})),r.a.createElement("div",{className:"flex-row flex-end"},r.a.createElement("button",{claseName:"btn",type:"submit"},"Submit"))))};var W=function(){return r.a.createElement("header",{className:"flex-row px-1"},r.a.createElement("h1",null,r.a.createElement(c.b,{to:"/"},r.a.createElement("span",{role:"img","aria-label":"shopping bag"},"\ud83d\udcdd"),"Words Projects")),r.a.createElement("nav",null,I.loggedIn()?r.a.createElement("ul",{className:"flex-row"},r.a.createElement("li",{className:"mx-1"},r.a.createElement(c.b,{to:"/AllProjects"},"All Projects")),r.a.createElement("li",{className:"mx-1"},r.a.createElement(c.b,{to:"/MyProject"},"My Projects")),r.a.createElement("li",{className:"mx-1"},r.a.createElement(c.b,{to:"/Dashboard"},"Dashboard")),r.a.createElement("li",{className:"mx-1"},r.a.createElement("a",{href:"/",onClick:function(){return I.logout()}},"Logout"))):r.a.createElement("ul",{className:"flex-row2"},r.a.createElement("li",{className:"mx-1"},r.a.createElement(c.b,{to:"/signup"},"Signup")),r.a.createElement("li",{className:"mx-12"},r.a.createElement(c.b,{to:"/login"},"Login")))))},q=a(44);function M(){var e=Object(h.a)(["\nquery{\n  users{  \n    _id\n    firstName\n    lastName   \n    projects{\n      _id\n      title\n      ideasText\n      date      \n    }\n     projectCount     \n  }\n}\n"]);return M=function(){return e},e}function V(){var e=Object(h.a)(["\n{\nme{  \n  _id\n  firstName\n  lastName   \n  projects{\n    _id\n    title\n    ideasText\n    date      \n  }\n   projectCount     \n }\n}\n"]);return V=function(){return e},e}function z(){var e=Object(h.a)(["\n  query ($firstName: String!) {\n    user(firstName: $firstName) {\n          firstName\n          lastName\t\t\t\t       \n          projects {\n             title\n             ideasText\n             date\n          }\n      projectCount\n    }\n  }\n"]);return z=function(){return e},e}w()(z());var H=w()(V());w()(M());function K(e,t,a){return new Promise((function(n,r){var o,l,c,i=window.indexedDB.open("WordsPorjectsDB",1);i.onupgradeneeded=function(e){i.result.createObjectStore("projects",{keyPath:"_id"})},i.onerror=function(e){console.log("There was an error")},i.onsuccess=function(r){switch(o=i.result,l=o.transaction(e,"readwrite"),c=l.objectStore(e),o.onerror=function(e){console.log("error",e)},t){case"put":c.put(a),n(a);break;case"get":var s=c.getAll();s.onsuccess=function(){n(s.result)};break;case"delete":c.delete(a._id);break;default:console.log("No valid method")}l.oncomplete=function(){o.close()}}}))}var Q=function(){var e=Object(n.useState)({title:"",ideasText:""}),t=Object(E.a)(e,2),a=t[0],o=t[1],l=a.title,c=a.ideasText,i=Object(n.useState)(""),s=Object(E.a)(i,2),u=s[0],m=s[1],f=Object(g.a)($,{update:function(e,t){var a=t.data.addProject;try{var n=e.readQuery({query:H}).proj;e.writeQuery({query:H,data:{proj:[a].concat(Object(q.a)(n))}})}catch(o){console.error(o)}var r=e.readQuery({query:H}).me;e.writeQuery({query:H,data:{me:Object(p.a)(Object(p.a)({},r),{},{projects:[].concat(Object(q.a)(r.projects),[a])})}})}}),h=Object(E.a)(f,2),j=h[0];function w(e){e.target.value.length?m(""):m("".concat(e.target.name," is required.")),u||o(Object(p.a)(Object(p.a)({},a),{},Object(d.a)({},e.target.name,e.target.value)))}h[1].error;var N=function(){var e=Object(b.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log("projects data",a),e.prev=2,e.next=5,j({variables:{project:a}});case 5:n=e.sent,n.data.addProject.projects.forEach((function(e){K("projects","put",e)})),o({title:"",ideasText:""}),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(2),window.saveRecord(a),console.error(e.t0),K("projects","put",a);case 16:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("section",null,r.a.createElement("h1",{className:"title","data-testid":"h1tag"},"Project Detail"),r.a.createElement("form",{className:"card-d",id:"contact-form",onSubmit:N},r.a.createElement("div",null,r.a.createElement("label",{className:"LabelDasgboard",htmlFor:"name"},"Project Name:"),r.a.createElement("input",{type:"text",name:"title",value:l,onChange:w})),r.a.createElement("div",null,r.a.createElement("label",{className:"LabelDasgboard",htmlFor:"textArea"},"Text Area:"),r.a.createElement("textarea",{name:"ideasText",rows:"5",value:c,onChange:w})),u&&r.a.createElement("div",null,r.a.createElement("p",{className:"error-text"},u)),r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("button",{claseName:"btn","data-testid":"btntag",type:"submit"},"Submit"))))},U=a(28),R=a(29),G=a(32);a(49);var J=function(){var e=Object(g.b)(H),t=e.loading,a=e.data,n=Object(g.a)(C),o=Object(E.a)(n,1)[0],l=(null===a||void 0===a?void 0:a.me)||{},c=function(){var e=Object(b.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("ID to delete",t),e.prev=1,e.next=4,o({variables:{_id:t}});case 4:window.location.reload(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return console.log("Query user",l.projects),t||console.log(l),r.a.createElement(r.a.Fragment,null,r.a.createElement("h5",null,l.firstName," ",l.lastName," have ",l.projectCount," ","project(s)"),t?"":null===l||void 0===l?void 0:l.projects.map((function(e){return r.a.createElement("div",{className:"Project"},r.a.createElement(U.a,{key:e._id,defaultActiveKey:"0"},r.a.createElement(R.a,null,r.a.createElement(U.a.Toggle,{as:R.a.Header,eventKey:"0"},r.a.createElement("h3",null,e.title,r.a.createElement("br",null),r.a.createElement("h6",null,e.date))),r.a.createElement(U.a.Collapse,{eventKey:"0"},r.a.createElement(R.a.Body,null,r.a.createElement("p",null,e.ideasText),r.a.createElement("br",null),r.a.createElement(G.a,{variant:"outline-success",onClick:function(){return c(e._id)}},r.a.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",class:"bi bi-trash",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"}),r.a.createElement("path",{"fill-rule":"evenodd",d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4L4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"})),"Delete"))))))})))},X=a(38),Y=a(57);function Z(){var e=Object(g.b)(H),t=e.loading,a=e.data,n=(null===a||void 0===a?void 0:a.me)||{};return console.log("Query user",n.projects),t||console.log(n),t?"":n.projects.map((function(e){return r.a.createElement("div",{className:"Projects"},r.a.createElement(U.a,{key:e._id,defaultActiveKey:"0"},r.a.createElement(R.a,null,r.a.createElement(U.a.Toggle,{as:R.a.Header,eventKey:"0"},r.a.createElement("h3",null,e.title)),r.a.createElement(U.a.Collapse,{eventKey:"0"},r.a.createElement(R.a.Body,null,r.a.createElement("p",null,e.ideasText),r.a.createElement("br",null),r.a.createElement("h4",null,"Donation!"),r.a.createElement(Y.a,{"aria-label":"Toolbar with button groups"},r.a.createElement(X.a,{className:"mr-2","aria-label":"First group"},r.a.createElement(G.a,{variant:"outline-success"},"$ 10.00")),r.a.createElement(X.a,{className:"mr-2","aria-label":"Second group"},r.a.createElement(G.a,{variant:"outline-success"},"$ 20.00")),r.a.createElement(X.a,{"aria-label":"Third group"},r.a.createElement(G.a,{variant:"outline-success"},"$ 50.00"))))))))}))}var ee=new u.a({request:function(e){var t=localStorage.getItem("id_token");e.setContext({headers:{authorization:t?"Bearer ".concat(t):""}})},uri:"/graphql"});var te=function(){return r.a.createElement(s.a,{client:ee},r.a.createElement(c.a,null,r.a.createElement("div",null,r.a.createElement(W,null),r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/",component:m}),r.a.createElement(i.a,{exact:!0,path:"/login",component:L}),r.a.createElement(i.a,{exact:!0,path:"/signup",component:B}),r.a.createElement(i.a,{exact:!0,path:"/Dashboard",component:Q}),r.a.createElement(i.a,{exact:!0,path:"/MyProject",component:J}),r.a.createElement("div",null,r.a.createElement("h2",{className:"title"},"Projects"),r.a.createElement(i.a,{exact:!0,path:"/AllProjects",component:Z}))))))},ae=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ne(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(te,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");ae?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ne(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ne(t,e)}))}}()}},[[59,1,2]]]);
//# sourceMappingURL=main.7d8d4d39.chunk.js.map